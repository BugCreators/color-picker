{"version":3,"sources":["webpack://MoColorPicker/webpack/universalModuleDefinition","webpack://MoColorPicker/webpack/bootstrap","webpack://MoColorPicker/./src/template.ts","webpack://MoColorPicker/./src/color.ts","webpack://MoColorPicker/./src/utils.ts","webpack://MoColorPicker/./src/draggable.ts","webpack://MoColorPicker/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","template","HEX_REG","RGB_REG","HSL_REG","HSV_REG","parseAlpha","a","isNaN","boundValue","max","Math","min","abs","hsv2rgb","h","v","f","q","g","b","round","rgb2hsv","hsv2hsl","hex2rgb","color","replace","length","colors","push","join","parseInt","rgb2hex","forEach","hex","toString","parseColor","test","_a","trim","split","filter","map","index","hsv","isHsl","reg","parseFloat","hsl2hsv","$","selector","context","document","querySelector","on","el","event","listener","addEventListener","off","removeEventListener","isFunction","defaults","start","drag","coordinate","end","handlerEnd","this","_handlers","dragEnd","Draggable","dragging","_props","getCoordinate","_$el","bindEvents","handlers","$el","dragStart","preventDefault","click","mouseEvent","rect","getBoundingClientRect","left","changedTouches","clientX","top","clientY","height","width","options","assign","destroy","draggable","__webpack_exports__","src_ColorPicker","UI_NAME","src_defaults","format","alpha","change","Selectors","sat","hue","alp","rail","thumb","render","props","states","_states","createElement","className","innerHTML","$sat","$hue","$alp","$satThumb","$hueThumb","$alpThumb","$alpRail","$wrap","appendChild","style","display","_","satDrag","satWidth","satHeight","saturation","afterSatChange","src_updateColor","hueDrag","hueWidth","afterHueChange","alpDrag","alpWidth","afterAlpChange","satDragIns","hueDragIns","alpDragIns","offsetWidth","offsetHeight","cssText","background","updateLeft","updateColor","hsl","afterColorsChange","value2Colors","init","_b","Option","getValue","ColorPicker","wrapper","setValue","_h","_s","_c","parentNode","removeChild"],"mappings":"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","file":"mo.color-picker.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MoColorPicker\"] = factory();\n\telse\n\t\troot[\"MoColorPicker\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export default `\n<div class=\"mo-color-sat-val\">\n  <div class=\"mo-color-thumb\" role=\"slider\" tabindex=\"0\">\n    <span></span>\n  </div>\n</div>\n<div class=\"mo-color-hue\">\n  <div class=\"mo-color-rail\"></div>\n  <div class=\"mo-color-thumb\" role=\"slider\" tabindex=\"0\">\n    <span></span>\n  </div>\n</div>\n<div class=\"mo-color-alpha\">\n  <div class=\"mo-color-rail\"></div>\n  <div class=\"mo-color-thumb\" role=\"slider\" tabindex=\"0\">\n    <span></span>\n  </div>\n</div>\n`","// 颜色转换相关算法\n// https://jsfiddle.net/Lamik/9rky6fco/\n// https://stackoverflow.com/questions/17242144/javascript-convert-hsb-hsv-color-to-rgb-accurately\n\ninterface Hsva {\n  h: number,\n  s: number,\n  v: number,\n  a?: number\n}\n\nconst HEX_REG = /^#([a-f\\d]{3}|[a-f\\d]{6})$/i\n\nconst RGB_REG = /^rgba?\\s?\\(/i\n\nconst HSL_REG = /^hsla?\\s?\\(/i\n\nconst HSV_REG = /^hsva?\\s?\\(/i\n\nconst parseAlpha = (a: any) => a !== void 0 && !isNaN(+a) && 0 <= +a && +a <= 1 ? +a : 1\n\nfunction boundValue(value: number, max: number) {\n  value = Math.min(max, Math.max(0, value))\n  if ((Math.abs(value - max) < 0.000001)) {\n    return 1\n  }\n  return (value % max) / (~~max)\n}\n\n/**\n * h.s.v. 转换为 r.g.b\n * @param h \n * @param s \n * @param v \n */\nexport const hsv2rgb = (h: number, s: number, v: number) => { \n  h = boundValue(h, 360)\n  s = boundValue(s * 100, 100)\n  v = boundValue(v * 100, 100)\n\n  const i = ~~(h*6)\n  const f = h * 6 - i\n  const p = v * (1 - s)\n  const q = v * (1 - f * s)\n  const t = v * (1 - (1 - f) * s)\n  let r = 0,g = 0,b = 0;\n    switch(i % 6){\n        case 0: r = v; g = t; b = p; break;\n        case 1: r = q; g = v; b = p; break;\n        case 2: r = p; g = v; b = t; break;\n        case 3: r = p; g = q; b = v; break;\n        case 4: r = t; g = p; b = v; break;\n        case 5: r = v, g = p, b = q; break;\n    }\n\n  const round = (value: number) => Math.round(value * 255)\n\n  return {\n    r: round(r),\n    g: round(g),\n    b: round(b)\n  }\n}\n\n/**\n * r.g.b 转换为 h.s.v\n * @param r \n * @param g \n * @param b \n * @param a \n */\nexport const rgb2hsv = (r: number, g: number, b: number, a?: number): Hsva => {\n  r = boundValue(r, 255)\n  g = boundValue(g, 255)\n  b = boundValue(b, 255)\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n  let h, s\n  let v = max\n\n  const d = max - min\n  s = max === 0 ? 0 : d / max\n\n  if (max === min) {\n    h = 0\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0)\n        break\n      case g:\n        h = (b - r) / d + 2\n        break\n      case b:\n        h = (r - g) / d + 4\n        break\n    }\n    h /= 6\n  }\n\n  return {\n    h: h * 360,\n    s: s,\n    v: v,\n    a: parseAlpha(a)\n  }\n}\n\n/**\n * h.s.v转换为h.s.l\n * @param h \n * @param s \n * @param v \n */\nexport const hsv2hsl = (h: number, s: number, v: number) => {\n  return {\n    h,\n    s: (s * v / ((h = (2 - s) * v) < 1 ? h : 2 - h)) || 0,\n    l: h / 2\n  }\n}\n\n/**\n * h.s.l转换为h.s.v\n * @param h \n * @param s \n * @param l \n * @param a \n */\nexport const hsl2hsv = (h: number, s: number, l: number, a?: number): Hsva => {\n  let _s\n  let _v\n  l *= 2\n  s *= (l <= 1) ? l : 2 - l\n  _v = (l + s) / 2\n  _s = (2 * s) / (l + s)\n  return {\n    h,\n    s: _s,\n    v: _v,\n    a: parseAlpha(a)\n  }\n}\n\n/**\n * hex转换为rgb\n * @param color \n */\nexport const hex2rgb = (color: string) => {\n  color = color.replace(/^#/, '')\n  if (color.length === 3) {\n    const colors = []\n    for (let i = 0; i < 3; i++) {\n      colors.push(color[i], color[i])\n    }\n    color = colors.join('')\n  }\n  \n  const r = parseInt( [color[0],color[1] ].join(''), 16 )\n  const g = parseInt( [color[2],color[3] ].join(''), 16 )\n  const b = parseInt( [color[4],color[5] ].join(''), 16 )\n\n  return {\n    r,\n    g,\n    b\n  }\n}\n\n/**\n * rgb转化为hex\n * @param r \n * @param g \n * @param b \n */\nexport const rgb2hex = (r: number, g: number, b: number): string => {\n  let color = '#'\n    ;[r, g, b].forEach(v => {\n      let hex = v.toString(16)\n      if (hex.length < 2) {\n        hex = '0' + hex\n      }\n      color += hex\n    })\n  return color\n}\n\n/**\n * 解析输入的任意颜色值\n * 输出h.s.v.a\n * @param color \n */\nexport const parseColor = (color: string): Hsva => {\n  if (!color) {\n    return\n  }\n\n  // hex\n  if (HEX_REG.test(color)) {\n    const { r, g, b } = hex2rgb(color)\n    return rgb2hsv(r, g, b)\n  }\n\n  // rgb\n  if (RGB_REG.test(color)) {\n    const colors = color\n      .replace(RGB_REG, '')\n      .replace(/\\)/, '')\n      .trim()\n      .split(',')\n      .filter((v: string) => v.trim() !== '')\n      .map((v: string, index: number) => index === 3 ? parseAlpha(v) : parseInt(v, 10))\n    // 不必校验每个值是否合法，最终校验生成的color即可\n    const [r, g, b, a] = colors\n    const hsv: Hsva = rgb2hsv(r, g, b)\n    hsv.a = parseAlpha(a)\n    return hsv\n  }\n\n  // hsv/hsl\n  let isHsl\n  if (HSV_REG.test(color) || (isHsl = HSL_REG.test(color))) {\n    const reg = isHsl ? HSL_REG : HSV_REG\n    const colors = color\n      .replace(reg, '')\n      .replace(/\\)/, '')\n      .trim()\n      .split(',')\n      .filter((v: string) => v.trim() !== '')\n      .map((v: string, index: number) => index === 3 ? parseAlpha(v) : parseFloat(v))\n    const [h, s, v, a] = colors\n    if (!isHsl) {\n      return {\n        h,\n        s,\n        v,\n        a\n      }\n    } else {\n      return hsl2hsv(h, s, v, a)\n    }\n  }\n\n  return\n}\n","export const $ = (selector: string, context: HTMLElement | Document = document): HTMLElement => context.querySelector(selector)\n\n// addEventListener\nexport const on = (el: Element | Document, event: string, listener: EventListener) => el.addEventListener(event, listener, false)\n\n// removeEventListener\nexport const off = (el: Element | Document, event: string, listener: EventListener) => el.removeEventListener(event, listener, false)\n\nexport const isFunction = (value: any) => typeof value === 'function'\n\nexport interface PlainObject {\n  [key: string]: any\n}\n","import { on, isFunction, off, PlainObject } from './utils'\n\ninterface Handlers extends PlainObject { }\n\n// 坐标\nexport interface Coordinate {\n  top: number\n  left: number\n}\n\ninterface Props {\n  start?: Function\n  drag?: Function\n  end?: Function\n}\n\n// 配置项\nconst defaults: Props = {\n  start: (event: Event) => { },\n  drag: (coordinate: Coordinate, event: Event) => { },\n  end: (coordinate: Coordinate, event: Event) => { }\n}\n\n/**\n * 开始拖拽事件\n * @private\n * @param {Draggable} this\n * @param {MouseEvent} event\n */\nfunction handlerStart(this: Draggable, event: MouseEvent) {\n  if (Draggable.dragging)\n    return\n  event.preventDefault()\n  on(document, 'touchmove', this._handlers.drag)\n  on(document, 'touchend', this._handlers.dragEnd)\n  on(document, 'mousemove', this._handlers.drag)\n  on(document, 'mouseup', this._handlers.dragEnd)\n  Draggable.dragging = true\n  isFunction(this._props.start) && this._props.start.call(this, event)\n}\n\n/**\n * 拖拽中事件\n * @private\n * @param {Draggable} this\n * @param {MouseEvent} event\n */\nfunction handlerDrag(this: Draggable, event: MouseEvent) {\n  isFunction(this._props.drag) && this._props.drag.call(this, getCoordinate(this._$el, event), event)\n}\n\n/**\n * 拖拽结束事件\n * @private\n * @param {Draggable} this\n * @param {(MouseEvent | boolean)} event\n */\nfunction handlerEnd(this: Draggable, event: MouseEvent | boolean) {\n  off(document, 'touchmove', this._handlers.drag)\n  off(document, 'touchend', this._handlers.dragEnd)\n  off(document, 'mousemove', this._handlers.drag)\n  off(document, 'mouseup', this._handlers.dragEnd)\n  Draggable.dragging = false\n  if (typeof event !== 'boolean') {\n    isFunction(this._props.end) && this._props.end.call(this, getCoordinate(this._$el, event), event)\n  }\n}\n\n/**\n * 点击事件\n * @private\n * @param {Draggable} this\n * @param {MouseEvent} event\n */\nfunction handlerClick(this: Draggable, event: MouseEvent) {\n  isFunction(this._props.end) && this._props.end.call(this, getCoordinate(this._$el, event), event)\n}\n\n/**\n * 绑定DOM事件\n * @private\n * @param {Draggable} this\n */\nfunction bindEvents(this: Draggable) {\n  const handlers = this._handlers\n  const $el = this._$el\n  handlers.dragStart = handlerStart.bind(this)\n  handlers.drag = handlerDrag.bind(this)\n  handlers.dragEnd = handlerEnd.bind(this)\n  handlers.click = handlerClick.bind(this)\n  on($el, 'touchstart', handlers.dragStart)\n  on($el, 'mousedown', handlers.dragStart)\n  on($el, 'click', handlers.click)\n}\n\n/**\n * 解绑DOM事件\n * @private\n * @param {Draggable} this\n */\nfunction unbindEvents(this: Draggable) {\n  const handlers = this._handlers\n  const $el = this._$el\n  off($el, 'touchstart', handlers.dragStart)\n  off($el, 'mousedown', handlers.dragStart)\n  off($el, 'click', handlers.click)\n  handlerEnd.call(this, false)\n}\n\n/**\n * 获取坐标\n * @function\n * @param el \n * @param event todo TouchEvent\n */\nfunction getCoordinate(el: Element, event: MouseEvent | TouchEvent): Coordinate {\n  const rect = el.getBoundingClientRect()\n\n  let mouseEvent: Touch | MouseEvent;\n  if (\"ontouchend\" in document) {\n    mouseEvent = (event as TouchEvent).changedTouches[0];\n  } else {\n    mouseEvent = event as MouseEvent;\n  }\n  const left = mouseEvent.clientX - rect.left\n  const top = mouseEvent.clientY - rect.top\n  return {\n    top: Math.min(Math.max(0, top), rect.height),\n    left: Math.min(Math.max(0, left), rect.width)\n  }\n}\n\n/**\n * Draggable 基类\n * 用于元素在其父元素上自由拖拽\n * 如 Range \n * @export\n * @class Draggable\n * @extends {EventsBus}\n */\nexport class Draggable {\n\n  // 是否正在拖拽中\n  static dragging = false\n  // 绑定事件的元素\n  protected _$el: Element\n  // 事件句柄收集器\n  protected _handlers: Handlers\n  // 配置项\n  protected _props: Props\n\n  /**\n   * Creates an instance of Draggable.\n   * @param {Element} el\n   * @param {Props} [options]\n   * @memberof Draggable\n   */\n  constructor(el: Element, options?: Props) {\n    this._$el = el\n    this._handlers = Object.create(null)\n    this._props = Object.assign({}, defaults, options)\n    bindEvents.call(this)\n  }\n\n  // 销毁\n  destroy() {\n    unbindEvents.call(this)\n    this._$el = null\n    this._handlers = null\n  }\n}\n\nexport default Draggable","// 引入样式文件\nrequire('./index.scss')\n\nimport template from './template'\nimport { hsv2hsl, parseColor, hsv2rgb, rgb2hex, hex2rgb } from './color'\nimport Draggable, { Coordinate } from './draggable'\nimport { $, PlainObject, isFunction } from './utils'\n\n// component name\nconst UI_NAME = 'mo-color-picker'\n\ntype ColorFormat = 'hsl' | 'hsv' | 'hex' | 'rgb'\n\ninterface Colors {\n  h: number\n  s: number\n  v: number\n  a: number\n}\n\ninterface Props {\n  // 绑定值\n  value?: string\n  // 格式化\n  format?: ColorFormat\n  // 支持透明度？\n  alpha?: boolean\n  // 回调\n  change?: Function\n}\n\n// default config\nconst defaults: Props = {\n  value: null,\n  format: 'rgb',\n  alpha: false,\n  change: (color: string, colors?: Colors) => { }\n}\n\n// selectors\nconst Selectors = {\n  sat: '.mo-color-sat-val',\n  hue: '.mo-color-hue',\n  alp: '.mo-color-alpha',\n  rail: '.mo-color-rail',\n  thumb: '.mo-color-thumb'\n}\n\n/**\n * render\n * @private\n * @param {ColorPicker} this\n */\nfunction render(this: ColorPicker) {\n  const { _props: props, _states: states } = this\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  $el.innerHTML = template\n\n  // 缓存DOM\n  states.$el = $el\n  states.$sat = $(Selectors.sat, $el)\n  states.$hue = $(Selectors.hue, $el)\n  states.$alp = $(Selectors.alp, $el)\n  states.$satThumb = $(Selectors.thumb, states.$sat)\n  states.$hueThumb = $(Selectors.thumb, states.$hue)\n  states.$alpThumb = $(Selectors.thumb, states.$alp)\n  states.$alpRail = $(Selectors.rail, states.$alp)\n  states.$wrap.appendChild($el)\n  if (!props.alpha) {\n    states.$alp.style.display = 'none'\n  }\n  bindEvents.call(this)\n}\n\n/**\n * 绑定事件\n * @private\n * @param {ColorPicker} this\n */\nfunction bindEvents(this: ColorPicker) {\n  const { _states: states } = this\n  const _ = this\n\n  // 饱和度/明度层拖拽回调\n  function satDrag(coordinate: Coordinate) {\n    const { top, left } = coordinate\n    const { satWidth, satHeight } = states\n    const saturation = Math.round(left / satWidth * 100) / 100\n    const value = Math.round((1 - top / satHeight) * 100) / 100\n    states.s = saturation\n    states.v = value\n    afterSatChange.call(_)\n    updateColor.call(_)\n  }\n\n  // 色相面板拖拽回调\n  function hueDrag(coordinate: Coordinate) {\n    const { left } = coordinate\n    const { hueWidth } = states\n    states.h = Math.round((left / hueWidth) * 360 * 100) / 100\n    afterHueChange.call(_)\n    updateColor.call(_)\n  }\n\n  // 透明度面板拖拽回调\n  function alpDrag(coordinate: Coordinate) {\n    const { left } = coordinate\n    const { alpWidth } = states\n    states.a = Math.round(left / alpWidth * 100) / 100\n    afterAlpChange.call(_, true, false)\n    updateColor.call(_)\n  }\n\n  // 分别初始化Draggable\n  states.satDragIns = new Draggable(states.$sat, {\n    drag: satDrag,\n    end: satDrag\n  })\n  states.hueDragIns = new Draggable(states.$hue, {\n    drag: hueDrag,\n    end: hueDrag\n  })\n  states.alpDragIns = new Draggable(states.$alp, {\n    drag: alpDrag,\n    end: alpDrag\n  })\n}\n\n/**\n * 解绑事件\n * @private\n * @param {ColorPicker} this\n */\nfunction unbindEvents(this: ColorPicker) {\n  const { _states: states } = this\n  states.satDragIns && states.satDragIns.destroy()\n  states.hueDragIns && states.hueDragIns.destroy()\n  states.alpDragIns && states.alpDragIns.destroy()\n}\n\n/**\n * 饱和度和明度改变时回调\n * @private\n * @param {ColorPicker} this\n */\nfunction afterSatChange(this: ColorPicker) {\n  const { _states: states } = this\n  const { s, v } = states\n  states.satWidth = states.satWidth || states.$sat.offsetWidth\n  states.satHeight = states.satHeight || states.$sat.offsetHeight\n  const top = Math.round((1 - v) * states.satHeight)\n  const left = Math.round(s * states.satWidth)\n  // 滑块在白色多的地方显示为反色， 优化\n  const color = s <= .2 && v >= .8 ? 'rgba(0,0,0,.7)' : 'white'\n  states.$satThumb.style.cssText += `top: ${top}px; left: ${left}px; color: ${color};`\n  afterAlpChange.call(this, false, true)\n}\n\n/**\n * 色相改变时回调\n * @private\n * @param {ColorPicker} this\n */\nfunction afterHueChange(this: ColorPicker) {\n  const { _states: states } = this\n  const { h } = states\n  states.hueWidth = states.hueWidth || states.$hue.offsetWidth\n  const left = Math.round(h / 360 * states.hueWidth)\n  states.$hueThumb.style.left = left + 'px'\n  states.$sat.style.background = `hsl(${h}, 100%, 50%)`\n  afterAlpChange.call(this, false, true)\n}\n\n/**\n * 透明度改变时回调\n * @private\n * @param {ColorPicker} this\n * @param {boolean} [updateLeft=true]\n * @param {boolean} [updateColor=true]\n */\nfunction afterAlpChange(this: ColorPicker, updateLeft: boolean = true, updateColor: boolean = true) {\n  const { _props: props, _states: states } = this\n  if (!props.alpha)\n    return\n  const { h, s, v, a } = states\n  if (updateLeft) {\n    states.alpWidth = states.alpWidth || states.$alp.offsetWidth\n    states.$alpThumb.style.left = a * states.alpWidth + 'px'\n  }\n  if (updateColor) {\n    const hsl = hsv2hsl(h, s, v)\n    states.$alpRail.style.background = `linear-gradient(to right, transparent, hsl(${hsl.h}, ${hsl.s * 100}%, ${hsl.l * 100}%))`\n  }\n}\n\n/**\n * 初始化或者调用setValue时更新相应DOM\n * @private\n * @param {ColorPicker} this\n */\nfunction afterColorsChange(this: ColorPicker) {\n  afterSatChange.call(this)\n  afterHueChange.call(this)\n  afterAlpChange.call(this, true, true)\n}\n\n/**\n * 校验颜色是否合法\n * 原理，如果颜色不合法，将会被转换为rgb(255,255,255)\n * 只需验证设置后的颜色是否等于传入的颜色\n * @param color \n */\nfunction checkColor(color: string) {\n  // todo\n  const style = new Option().style\n  style.color = color\n  return (style.color || '').replace(/\\s/g, '') === color\n}\n\n/**\n * 将传入值转换为Colors对象\n * @private\n * @param {ColorPicker} this\n * @param {string} value\n * @param {boolean} [init]\n */\nfunction value2Colors(this: ColorPicker, value: string, init?: boolean) {\n  // h: 0 - 360\n  // s: 0 - 1\n  // v: 0 - 1\n  const { _states: states } = this\n  if (value) {\n    // 正确时返回颜色值，不正确时返回undefined\n    const { h, s, v, a } = parseColor(value)\n    const { r, g, b } = hsv2rgb(h, s, v)\n    // 校验当前颜色是否正确\n    if (h === void 0 || !checkColor(`rgb(${r},${g},${b})`)) {\n      // 不做操作\n    } else {\n      states.h = h\n      states.s = s\n      states.v = v\n      states.a = a\n      afterColorsChange.call(this)\n      return\n    }\n  }\n\n  if (init) {\n    states.h = 360\n    states.s = 1\n    states.v = 1\n    states.a = 1\n    afterColorsChange.call(this)\n  }\n}\n\n/**\n * 面板上的值改变时通过钩子函数传递给实例\n * @private\n * @param {ColorPicker} this\n */\nfunction updateColor(this: ColorPicker) {\n  const { _props: props, _states: states } = this\n  const { h, s, v, a } = states\n  isFunction(props.change) && props.change.call(this, this.getValue(), {\n    h, s, v, a\n  })\n}\n\n\n/**\n * 颜色选择器\n * @export\n * @class ColorPicker\n */\nexport class ColorPicker {\n  public static hex2rgb = hex2rgb\n  public static rgb2hex = rgb2hex\n\n  protected _states: PlainObject\n  protected _props: Props\n\n  /**\n   * Creates an instance of ColorPicker.\n   * @param {HTMLElement} wrapper\n   * @param {Props} [options]\n   * @memberof ColorPicker\n   */\n  constructor(wrapper: HTMLElement, options?: Props) {\n    this._states = Object.create(null)\n    this._props = Object.assign({}, defaults, options)\n    this._states.$wrap = wrapper\n    render.call(this)\n    value2Colors.call(this, this._props.value, true)\n  }\n\n  /**\n   * 手动更新值\n   * @public\n   * @param {(Colors | null)} value\n   * @memberof ColorPicker\n   */\n  setValue(value: Colors | null) {\n    if (value === null) {\n      value2Colors.call(this, null, true)\n    } else if (value) {\n      value2Colors.call(this, value)\n    }\n  }\n\n  /**\n   * 获取当前颜色\n   * @public\n   * @returns {string}\n   * @memberof ColorPicker\n   */\n  getValue(format?: ColorFormat): string {\n    const { _props: props, _states: states } = this\n    const { h, s, v, a } = states\n    let color\n    format = format || props.format\n    switch (format) {\n      case 'hsl':\n        const { h: _h, s: _s, l } = hsv2hsl(h, s, v)\n        color = props.alpha ? `hsla(${Math.round(_h)}, ${Math.round(_s * 100)}%, ${Math.round(l * 100)}%, ${a})` : `hsl(${Math.round(_h)}, ${Math.round(_s * 100)}%, ${Math.round(l * 100)}%)`\n        break\n      case 'hsv':\n        color = props.alpha ? `hsva(${Math.round(h)}, ${Math.round(s * 100)}%, ${Math.round(v * 100)}%, ${a})` : `hsv(${Math.round(h)}, ${Math.round(s * 100)}%, ${Math.round(v * 100)}%)`\n        break\n        break\n      case 'hex':\n      case 'rgb':\n      default:\n        const { r, g, b } = hsv2rgb(h, s, v)\n        if (format === 'hex') {\n          color = rgb2hex(r, g, b)\n        } else {\n          color = props.alpha ? `rgba(${r}, ${g}, ${b}, ${a})` : `rgb(${r}, ${g}, ${b})`\n        }\n    }\n    return color\n  }\n\n  // 销毁组件\n  destroy() {\n    unbindEvents.call(this)\n    this._states.$el.parentNode.removeChild(this._states.$el)\n    this._props = null\n    this._states = null\n  }\n}\n\nexport default ColorPicker"],"sourceRoot":""}