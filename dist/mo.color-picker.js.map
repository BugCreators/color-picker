{"version":3,"sources":["webpack://MoColorPicker/webpack/universalModuleDefinition","webpack://MoColorPicker/webpack/bootstrap","webpack://MoColorPicker/./src/utils.ts","webpack://MoColorPicker/./src/index.ts","webpack://MoColorPicker/./src/template.ts","webpack://MoColorPicker/./src/color.ts","webpack://MoColorPicker/./src/draggable.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","selector","context","document","querySelector","on","el","event","listener","addEventListener","off","removeEventListener","isFunction","template_1","color_1","draggable_1","utils_1","UI_NAME","defaults","format","alpha","change","color","colors","Selectors","sat","hue","alp","rail","thumb","render","props","this","_props","states","_states","$el","createElement","className","innerHTML","default","$sat","$hue","$alp","$satThumb","$hueThumb","$alpThumb","$alpRail","$wrap","appendChild","style","display","_","satDrag","coordinate","top","left","satWidth","satHeight","saturation","Math","round","v","afterSatChange","updateColor","hueDrag","hueWidth","h","afterHueChange","alpDrag","alpWidth","a","afterAlpChange","satDragIns","drag","end","hueDragIns","alpDragIns","offsetWidth","offsetHeight","cssText","background","updateLeft","hsl","hsv2hsl","afterColorsChange","value2Colors","init","_a","parseColor","_b","hsv2rgb","g","b","Option","replace","getValue","ColorPicker","wrapper","options","assign","setValue","_h","_s","_c","rgb2hex","destroy","parentNode","removeChild","HEX_REG","RGB_REG","HSL_REG","HSV_REG","parseAlpha","isNaN","boundValue","max","min","abs","f","q","rgb2hsv","hsl2hsv","hex2rgb","length","push","join","parseInt","forEach","hex","toString","test","trim","split","filter","map","index","hsv","isHsl","reg","parseFloat","start","handlerEnd","_handlers","dragEnd","Draggable","dragging","getCoordinate","_$el","bindEvents","handlers","dragStart","preventDefault","click","rect","getBoundingClientRect","mouseEvent","clientX","clientY","height","width"],"mappings":"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","file":"mo.color-picker.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MoColorPicker\"] = factory();\n\telse\n\t\troot[\"MoColorPicker\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export const $ = (selector: string, context: HTMLElement | Document = document): HTMLElement => context.querySelector(selector)\n\n// addEventListener\nexport const on = (el: Element | Document, event: string, listener: EventListener) => el.addEventListener(event, listener, false)\n\n// removeEventListener\nexport const off = (el: Element | Document, event: string, listener: EventListener) => el.removeEventListener(event, listener, false)\n\nexport const isFunction = (value: any) => typeof value === 'function'\n\nexport interface PlainObject {\n  [key: string]: any\n}\n","// 引入样式文件\nrequire('./index.scss')\n\nimport template from './template'\nimport { hsv2hsl, parseColor, hsv2rgb, rgb2hex } from './color'\nimport Draggable, { Coordinate } from './draggable'\nimport { $, PlainObject, isFunction } from './utils'\n\n// component name\nconst UI_NAME = 'mo-color-picker'\n\ntype ColorFormat = 'hsl' | 'hsv' | 'hex' | 'rgb'\n\ninterface Colors {\n  h: number\n  s: number\n  v: number\n  a: number\n}\n\ninterface Props {\n  // 绑定值\n  value?: string\n  // 格式化\n  format?: ColorFormat\n  // 支持透明度？\n  alpha?: boolean\n  // 回调\n  change?: Function\n}\n\n// default config\nconst defaults: Props = {\n  value: null,\n  format: 'rgb',\n  alpha: false,\n  change: (color: string, colors?: Colors) => { }\n}\n\n// selectors\nconst Selectors = {\n  sat: '.mo-color-sat-val',\n  hue: '.mo-color-hue',\n  alp: '.mo-color-alpha',\n  rail: '.mo-color-rail',\n  thumb: '.mo-color-thumb'\n}\n\n/**\n * render\n * @private\n * @param {ColorPicker} this\n */\nfunction render(this: ColorPicker) {\n  const { _props: props, _states: states } = this\n  const $el = document.createElement('div')\n  $el.className = UI_NAME\n  $el.innerHTML = template\n\n  // 缓存DOM\n  states.$el = $el\n  states.$sat = $(Selectors.sat, $el)\n  states.$hue = $(Selectors.hue, $el)\n  states.$alp = $(Selectors.alp, $el)\n  states.$satThumb = $(Selectors.thumb, states.$sat)\n  states.$hueThumb = $(Selectors.thumb, states.$hue)\n  states.$alpThumb = $(Selectors.thumb, states.$alp)\n  states.$alpRail = $(Selectors.rail, states.$alp)\n  states.$wrap.appendChild($el)\n  if (!props.alpha) {\n    states.$alp.style.display = 'none'\n  }\n  bindEvents.call(this)\n}\n\n/**\n * 绑定事件\n * @private\n * @param {ColorPicker} this\n */\nfunction bindEvents(this: ColorPicker) {\n  const { _states: states } = this\n  const _ = this\n\n  // 饱和度/明度层拖拽回调\n  function satDrag(coordinate: Coordinate) {\n    const { top, left } = coordinate\n    const { satWidth, satHeight } = states\n    const saturation = Math.round(left / satWidth * 100) / 100\n    const value = Math.round((1 - top / satHeight) * 100) / 100\n    states.s = saturation\n    states.v = value\n    afterSatChange.call(_)\n    updateColor.call(_)\n  }\n\n  // 色相面板拖拽回调\n  function hueDrag(coordinate: Coordinate) {\n    const { left } = coordinate\n    const { hueWidth } = states\n    states.h = Math.round((left / hueWidth) * 360 * 100) / 100\n    afterHueChange.call(_)\n    updateColor.call(_)\n  }\n\n  // 透明度面板拖拽回调\n  function alpDrag(coordinate: Coordinate) {\n    const { left } = coordinate\n    const { alpWidth } = states\n    states.a = Math.round(left / alpWidth * 100) / 100\n    afterAlpChange.call(_, true, false)\n    updateColor.call(_)\n  }\n\n  // 分别初始化Draggable\n  states.satDragIns = new Draggable(states.$sat, {\n    drag: satDrag,\n    end: satDrag\n  })\n  states.hueDragIns = new Draggable(states.$hue, {\n    drag: hueDrag,\n    end: hueDrag\n  })\n  states.alpDragIns = new Draggable(states.$alp, {\n    drag: alpDrag,\n    end: alpDrag\n  })\n}\n\n/**\n * 解绑事件\n * @private\n * @param {ColorPicker} this\n */\nfunction unbindEvents(this: ColorPicker) {\n  const { _states: states } = this\n  states.satDragIns && states.satDragIns.destroy()\n  states.hueDragIns && states.hueDragIns.destroy()\n  states.alpDragIns && states.alpDragIns.destroy()\n}\n\n/**\n * 饱和度和明度改变时回调\n * @private\n * @param {ColorPicker} this\n */\nfunction afterSatChange(this: ColorPicker) {\n  const { _states: states } = this\n  const { s, v } = states\n  states.satWidth = states.satWidth || states.$sat.offsetWidth\n  states.satHeight = states.satHeight || states.$sat.offsetHeight\n  const top = Math.round((1 - v) * states.satHeight)\n  const left = Math.round(s * states.satWidth)\n  // 滑块在白色多的地方显示为反色， 优化\n  const color = s <= .2 && v >= .8 ? 'rgba(0,0,0,.7)' : 'white'\n  states.$satThumb.style.cssText += `top: ${top}px; left: ${left}px; color: ${color};`\n  afterAlpChange.call(this, false, true)\n}\n\n/**\n * 色相改变时回调\n * @private\n * @param {ColorPicker} this\n */\nfunction afterHueChange(this: ColorPicker) {\n  const { _states: states } = this\n  const { h } = states\n  states.hueWidth = states.hueWidth || states.$hue.offsetWidth\n  const left = Math.round(h / 360 * states.hueWidth)\n  states.$hueThumb.style.left = left + 'px'\n  states.$sat.style.background = `hsl(${h}, 100%, 50%)`\n  afterAlpChange.call(this, false, true)\n}\n\n/**\n * 透明度改变时回调\n * @private\n * @param {ColorPicker} this\n * @param {boolean} [updateLeft=true]\n * @param {boolean} [updateColor=true]\n */\nfunction afterAlpChange(this: ColorPicker, updateLeft: boolean = true, updateColor: boolean = true) {\n  const { _props: props, _states: states } = this\n  if (!props.alpha)\n    return\n  const { h, s, v, a } = states\n  if (updateLeft) {\n    states.alpWidth = states.alpWidth || states.$alp.offsetWidth\n    states.$alpThumb.style.left = a * states.alpWidth + 'px'\n  }\n  if (updateColor) {\n    const hsl = hsv2hsl(h, s, v)\n    states.$alpRail.style.background = `linear-gradient(to right, transparent, hsl(${hsl.h}, ${hsl.s * 100}%, ${hsl.l * 100}%))`\n  }\n}\n\n/**\n * 初始化或者调用setValue时更新相应DOM\n * @private\n * @param {ColorPicker} this\n */\nfunction afterColorsChange(this: ColorPicker) {\n  afterSatChange.call(this)\n  afterHueChange.call(this)\n  afterAlpChange.call(this, true, true)\n}\n\n/**\n * 校验颜色是否合法\n * 原理，如果颜色不合法，将会被转换为rgb(255,255,255)\n * 只需验证设置后的颜色是否等于传入的颜色\n * @param color \n */\nfunction checkColor(color: string) {\n  // todo\n  const style = new Option().style\n  style.color = color\n  return (style.color || '').replace(/\\s/g, '') === color\n}\n\n/**\n * 将传入值转换为Colors对象\n * @private\n * @param {ColorPicker} this\n * @param {string} value\n * @param {boolean} [init]\n */\nfunction value2Colors(this: ColorPicker, value: string, init?: boolean) {\n  // h: 0 - 360\n  // s: 0 - 1\n  // v: 0 - 1\n  const { _states: states } = this\n  if (value) {\n    // 正确时返回颜色值，不正确时返回undefined\n    const { h, s, v, a } = parseColor(value)\n    const { r, g, b } = hsv2rgb(h, s, v)\n    // 校验当前颜色是否正确\n    if (h === void 0 || !checkColor(`rgb(${r},${g},${b})`)) {\n      // 不做操作\n    } else {\n      states.h = h\n      states.s = s\n      states.v = v\n      states.a = a\n      afterColorsChange.call(this)\n      return\n    }\n  }\n\n  if (init) {\n    states.h = 360\n    states.s = 1\n    states.v = 1\n    states.a = 1\n    afterColorsChange.call(this)\n  }\n}\n\n/**\n * 面板上的值改变时通过钩子函数传递给实例\n * @private\n * @param {ColorPicker} this\n */\nfunction updateColor(this: ColorPicker) {\n  const { _props: props, _states: states } = this\n  const { h, s, v, a } = states\n  isFunction(props.change) && props.change.call(this, this.getValue(), {\n    h, s, v, a\n  })\n}\n\n\n/**\n * 颜色选择器\n * @export\n * @class ColorPicker\n */\nexport class ColorPicker {\n  protected _states: PlainObject\n  protected _props: Props\n\n  /**\n   * Creates an instance of ColorPicker.\n   * @param {HTMLElement} wrapper\n   * @param {Props} [options]\n   * @memberof ColorPicker\n   */\n  constructor(wrapper: HTMLElement, options?: Props) {\n    this._states = Object.create(null)\n    this._props = Object.assign({}, defaults, options)\n    this._states.$wrap = wrapper\n    render.call(this)\n    value2Colors.call(this, this._props.value, true)\n  }\n\n  /**\n   * 手动更新值\n   * @public\n   * @param {(Colors | null)} value\n   * @memberof ColorPicker\n   */\n  setValue(value: Colors | null) {\n    if (value === null) {\n      value2Colors.call(this, null, true)\n    } else if (value) {\n      value2Colors.call(this, value)\n    }\n  }\n\n  /**\n   * 获取当前颜色\n   * @public\n   * @returns {string}\n   * @memberof ColorPicker\n   */\n  getValue(format?: ColorFormat): string {\n    const { _props: props, _states: states } = this\n    const { h, s, v, a } = states\n    let color\n    format = format || props.format\n    switch (format) {\n      case 'hsl':\n        const { h: _h, s: _s, l } = hsv2hsl(h, s, v)\n        color = props.alpha ? `hsla(${Math.round(_h)}, ${Math.round(_s * 100)}%, ${Math.round(l * 100)}%, ${a})` : `hsl(${Math.round(_h)}, ${Math.round(_s * 100)}%, ${Math.round(l * 100)}%)`\n        break\n      case 'hsv':\n        color = props.alpha ? `hsva(${Math.round(h)}, ${Math.round(s * 100)}%, ${Math.round(v * 100)}%, ${a})` : `hsv(${Math.round(h)}, ${Math.round(s * 100)}%, ${Math.round(v * 100)}%)`\n        break\n        break\n      case 'hex':\n      case 'rgb':\n      default:\n        const { r, g, b } = hsv2rgb(h, s, v)\n        if (format === 'hex') {\n          color = rgb2hex(r, g, b)\n        } else {\n          color = props.alpha ? `rgba(${r}, ${g}, ${b}, ${a})` : `rgb(${r}, ${g}, ${b})`\n        }\n    }\n    return color\n  }\n\n  // 销毁组件\n  destroy() {\n    unbindEvents.call(this)\n    this._states.$el.parentNode.removeChild(this._states.$el)\n    this._props = null\n    this._states = null\n  }\n}\n\nexport default ColorPicker","export default `\n<div class=\"mo-color-sat-val\">\n  <div class=\"mo-color-thumb\" role=\"slider\" tabindex=\"0\">\n    <span></span>\n  </div>\n</div>\n<div class=\"mo-color-hue\">\n  <div class=\"mo-color-rail\"></div>\n  <div class=\"mo-color-thumb\" role=\"slider\" tabindex=\"0\">\n    <span></span>\n  </div>\n</div>\n<div class=\"mo-color-alpha\">\n  <div class=\"mo-color-rail\"></div>\n  <div class=\"mo-color-thumb\" role=\"slider\" tabindex=\"0\">\n    <span></span>\n  </div>\n</div>\n`","// 颜色转换相关算法\n// https://jsfiddle.net/Lamik/9rky6fco/\n// https://stackoverflow.com/questions/17242144/javascript-convert-hsb-hsv-color-to-rgb-accurately\n\ninterface Hsva {\n  h: number,\n  s: number,\n  v: number,\n  a?: number\n}\n\nconst HEX_REG = /^#([a-f\\d]{3}|[a-f\\d]{6})$/i\n\nconst RGB_REG = /^rgba?\\s?\\(/i\n\nconst HSL_REG = /^hsla?\\s?\\(/i\n\nconst HSV_REG = /^hsva?\\s?\\(/i\n\nconst parseAlpha = (a: any) => a !== void 0 && !isNaN(+a) && 0 <= +a && +a <= 1 ? +a : 1\n\nfunction boundValue(value: number, max: number) {\n  value = Math.min(max, Math.max(0, value))\n  if ((Math.abs(value - max) < 0.000001)) {\n    return 1\n  }\n  return (value % max) / (~~max)\n}\n\n/**\n * h.s.v. 转换为 r.g.b\n * @param h \n * @param s \n * @param v \n */\nexport const hsv2rgb = (h: number, s: number, v: number) => { \n  h = boundValue(h, 360)\n  s = boundValue(s * 100, 100)\n  v = boundValue(v * 100, 100)\n\n  const i = ~~(h*6)\n  const f = h * 6 - i\n  const p = v * (1 - s)\n  const q = v * (1 - f * s)\n  const t = v * (1 - (1 - f) * s)\n  let r = 0,g = 0,b = 0;\n    switch(i % 6){\n        case 0: r = v; g = t; b = p; break;\n        case 1: r = q; g = v; b = p; break;\n        case 2: r = p; g = v; b = t; break;\n        case 3: r = p; g = q; b = v; break;\n        case 4: r = t; g = p; b = v; break;\n        case 5: r = v, g = p, b = q; break;\n    }\n\n  const round = (value: number) => Math.round(value * 255)\n\n  return {\n    r: round(r),\n    g: round(g),\n    b: round(b)\n  }\n}\n\n/**\n * r.g.b 转换为 h.s.v\n * @param r \n * @param g \n * @param b \n * @param a \n */\nexport const rgb2hsv = (r: number, g: number, b: number, a?: number): Hsva => {\n  r = boundValue(r, 255)\n  g = boundValue(g, 255)\n  b = boundValue(b, 255)\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n  let h, s\n  let v = max\n\n  const d = max - min\n  s = max === 0 ? 0 : d / max\n\n  if (max === min) {\n    h = 0\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0)\n        break\n      case g:\n        h = (b - r) / d + 2\n        break\n      case b:\n        h = (r - g) / d + 4\n        break\n    }\n    h /= 6\n  }\n\n  return {\n    h: h * 360,\n    s: s,\n    v: v,\n    a: parseAlpha(a)\n  }\n}\n\n/**\n * h.s.v转换为h.s.l\n * @param h \n * @param s \n * @param v \n */\nexport const hsv2hsl = (h: number, s: number, v: number) => {\n  return {\n    h,\n    s: (s * v / ((h = (2 - s) * v) < 1 ? h : 2 - h)) || 0,\n    l: h / 2\n  }\n}\n\n/**\n * h.s.l转换为h.s.v\n * @param h \n * @param s \n * @param l \n * @param a \n */\nexport const hsl2hsv = (h: number, s: number, l: number, a?: number): Hsva => {\n  let _s\n  let _v\n  l *= 2\n  s *= (l <= 1) ? l : 2 - l\n  _v = (l + s) / 2\n  _s = (2 * s) / (l + s)\n  return {\n    h,\n    s: _s,\n    v: _v,\n    a: parseAlpha(a)\n  }\n}\n\n/**\n * hex转换为rgb\n * @param color \n */\nexport const hex2rgb = (color: string) => {\n  color = color.replace(/^#/, '')\n  if (color.length === 3) {\n    const colors = []\n    for (let i = 0; i < 3; i++) {\n      colors.push(color[i], color[i])\n    }\n    color = colors.join('')\n  }\n  \n  const r = parseInt( [color[0],color[1] ].join(''), 16 )\n  const g = parseInt( [color[2],color[3] ].join(''), 16 )\n  const b = parseInt( [color[4],color[5] ].join(''), 16 )\n\n  return {\n    r,\n    g,\n    b\n  }\n}\n\n/**\n * rgb转化为hex\n * @param r \n * @param g \n * @param b \n */\nexport const rgb2hex = (r: number, g: number, b: number): string => {\n  let color = '#'\n    ;[r, g, b].forEach(v => {\n      let hex = v.toString(16)\n      if (hex.length < 2) {\n        hex = '0' + hex\n      }\n      color += hex\n    })\n  return color\n}\n\n/**\n * 解析输入的任意颜色值\n * 输出h.s.v.a\n * @param color \n */\nexport const parseColor = (color: string): Hsva => {\n  if (!color) {\n    return\n  }\n\n  // hex\n  if (HEX_REG.test(color)) {\n    const { r, g, b } = hex2rgb(color)\n    return rgb2hsv(r, g, b)\n  }\n\n  // rgb\n  if (RGB_REG.test(color)) {\n    const colors = color\n      .replace(RGB_REG, '')\n      .replace(/\\)/, '')\n      .trim()\n      .split(',')\n      .filter((v: string) => v.trim() !== '')\n      .map((v: string, index: number) => index === 3 ? parseAlpha(v) : parseInt(v, 10))\n    // 不必校验每个值是否合法，最终校验生成的color即可\n    const [r, g, b, a] = colors\n    const hsv: Hsva = rgb2hsv(r, g, b)\n    hsv.a = parseAlpha(a)\n    return hsv\n  }\n\n  // hsv/hsl\n  let isHsl\n  if (HSV_REG.test(color) || (isHsl = HSL_REG.test(color))) {\n    const reg = isHsl ? HSL_REG : HSV_REG\n    const colors = color\n      .replace(reg, '')\n      .replace(/\\)/, '')\n      .trim()\n      .split(',')\n      .filter((v: string) => v.trim() !== '')\n      .map((v: string, index: number) => index === 3 ? parseAlpha(v) : parseFloat(v))\n    const [h, s, v, a] = colors\n    if (!isHsl) {\n      return {\n        h,\n        s,\n        v,\n        a\n      }\n    } else {\n      return hsl2hsv(h, s, v, a)\n    }\n  }\n\n  return\n}\n\nexport default {\n  hsv2rgb,\n  rgb2hsv,\n  hsv2hsl,\n  hsl2hsv,\n  hex2rgb,\n  rgb2hex,\n  parseColor\n}","import { on, isFunction, off, PlainObject } from './utils'\n\ninterface Handlers extends PlainObject { }\n\n// 坐标\nexport interface Coordinate {\n  top: number\n  left: number\n}\n\ninterface Props {\n  start?: Function\n  drag?: Function\n  end?: Function\n}\n\n// 配置项\nconst defaults: Props = {\n  start: (event: Event) => { },\n  drag: (coordinate: Coordinate, event: Event) => { },\n  end: (coordinate: Coordinate, event: Event) => { }\n}\n\n/**\n * 开始拖拽事件\n * @private\n * @param {Draggable} this\n * @param {MouseEvent} event\n */\nfunction handlerStart(this: Draggable, event: MouseEvent) {\n  if (Draggable.dragging)\n    return\n  event.preventDefault()\n  on(document, 'mousemove', this._handlers.drag)\n  on(document, 'mouseup', this._handlers.dragEnd)\n  Draggable.dragging = true\n  isFunction(this._props.start) && this._props.start.call(this, event)\n}\n\n/**\n * 拖拽中事件\n * @private\n * @param {Draggable} this\n * @param {MouseEvent} event\n */\nfunction handlerDrag(this: Draggable, event: MouseEvent) {\n  isFunction(this._props.drag) && this._props.drag.call(this, getCoordinate(this._$el, event), event)\n}\n\n/**\n * 拖拽结束事件\n * @private\n * @param {Draggable} this\n * @param {(MouseEvent | boolean)} event\n */\nfunction handlerEnd(this: Draggable, event: MouseEvent | boolean) {\n  off(document, 'mousemove', this._handlers.drag)\n  off(document, 'mouseup', this._handlers.dragEnd)\n  Draggable.dragging = false\n  if (typeof event !== 'boolean') {\n    isFunction(this._props.end) && this._props.end.call(this, getCoordinate(this._$el, event), event)\n  }\n}\n\n/**\n * 点击事件\n * @private\n * @param {Draggable} this\n * @param {MouseEvent} event\n */\nfunction handlerClick(this: Draggable, event: MouseEvent) {\n  isFunction(this._props.end) && this._props.end.call(this, getCoordinate(this._$el, event), event)\n}\n\n/**\n * 绑定DOM事件\n * @private\n * @param {Draggable} this\n */\nfunction bindEvents(this: Draggable) {\n  const handlers = this._handlers\n  const $el = this._$el\n  handlers.dragStart = handlerStart.bind(this)\n  handlers.drag = handlerDrag.bind(this)\n  handlers.dragEnd = handlerEnd.bind(this)\n  handlers.click = handlerClick.bind(this)\n  on($el, 'mousedown', handlers.dragStart)\n  on($el, 'click', handlers.click)\n}\n\n/**\n * 解绑DOM事件\n * @private\n * @param {Draggable} this\n */\nfunction unbindEvents(this: Draggable) {\n  const handlers = this._handlers\n  const $el = this._$el\n  off($el, 'mousedown', handlers.dragStart)\n  off($el, 'click', handlers.click)\n  handlerEnd.call(this, false)\n}\n\n/**\n * 获取坐标\n * @function\n * @param el \n * @param event todo TouchEvent\n */\nfunction getCoordinate(el: Element, event: MouseEvent | TouchEvent): Coordinate {\n  const rect = el.getBoundingClientRect()\n  const mouseEvent = event as MouseEvent\n  const left = mouseEvent.clientX - rect.left\n  const top = mouseEvent.clientY - rect.top\n  return {\n    top: Math.min(Math.max(0, top), rect.height),\n    left: Math.min(Math.max(0, left), rect.width)\n  }\n}\n\n/**\n * Draggable 基类\n * 用于元素在其父元素上自由拖拽\n * 如 Range \n * @export\n * @class Draggable\n * @extends {EventsBus}\n */\nexport class Draggable {\n\n  // 是否正在拖拽中\n  static dragging = false\n  // 绑定事件的元素\n  protected _$el: Element\n  // 事件句柄收集器\n  protected _handlers: Handlers\n  // 配置项\n  protected _props: Props\n\n  /**\n   * Creates an instance of Draggable.\n   * @param {Element} el\n   * @param {Props} [options]\n   * @memberof Draggable\n   */\n  constructor(el: Element, options?: Props) {\n    this._$el = el\n    this._handlers = Object.create(null)\n    this._props = Object.assign({}, defaults, options)\n    bindEvents.call(this)\n  }\n\n  // 销毁\n  destroy() {\n    unbindEvents.call(this)\n    this._$el = null\n    this._handlers = null\n  }\n}\n\nexport default Draggable"],"sourceRoot":""}